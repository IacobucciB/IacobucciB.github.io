<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-06-29 s·b. 14:52 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CDyM - TP1</title>
<meta name="author" content="IacobucciB" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">CDyM - TP1</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org07a1d33">1. Atmega328p - C - Control de perif√©ricos LED externos con puertos de entrada/salida</a>
<ul>
<li><a href="#orgfc58548">1.1. Conexi√≥n de los LEDs</a>
<ul>
<li><a href="#org843dd65">1.1.1. Enunciado</a></li>
<li><a href="#org2cf016e">1.1.2. Interpretaci√≥n</a></li>
<li><a href="#orge0d309a">1.1.3. Resoluci√≥n</a></li>
</ul>
</li>
<li><a href="#org70283ce">1.2. Conexi√≥n del Pulsador</a>
<ul>
<li><a href="#org04045e1">1.2.1. Enunciado</a></li>
<li><a href="#org89702fe">1.2.2. Interpretaci√≥n</a></li>
<li><a href="#org6843358">1.2.3. Resoluci√≥n</a></li>
</ul>
</li>
<li><a href="#org23e3ff8">1.3. Secuencia de Encendido</a>
<ul>
<li><a href="#org4d401ee">1.3.1. Enunciado</a></li>
<li><a href="#org78bb0d5">1.3.2. Interpretaci√≥n</a></li>
<li><a href="#orgb3ba5ed">1.3.3. Resoluci√≥n</a></li>
</ul>
</li>
<li><a href="#org9d01b30">1.4. Conclusiones</a>
<ul>
<li><a href="#org79f1dd3">1.4.1. Enunciado</a></li>
<li><a href="#org4f5596c">1.4.2. Resoluci√≥n</a></li>
</ul>
</li>
<li><a href="#org149f950">1.5. Bibliograf√≠a</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org07a1d33" class="outline-2">
<h2 id="org07a1d33"><span class="section-number-2">1.</span> Atmega328p - C - Control de perif√©ricos LED externos con puertos de entrada/salida</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgfc58548" class="outline-3">
<h3 id="orgfc58548"><span class="section-number-3">1.1.</span> Conexi√≥n de los LEDs</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-org843dd65" class="outline-4">
<h4 id="org843dd65"><span class="section-number-4">1.1.1.</span> Enunciado</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
Se desea conectar 8 diodos LED de diferentes colores al puerto B del MCU y encenderlos con una corriente de 10mA en cada uno.
Realice el esquema el√©ctrico de la conexi√≥n en Proteus.
Calcule la resistencia serie para cada color teniendo en cuenta la ca√≠da de tensi√≥n VLED (rojo=1.8V, verde=2.2V amarillo=2.0V azul=3.0V).
Verifique que la corriente por cada terminal del MCU no supere la capacidad de corriente de cada salida y de todas las salidas del mismo puerto en funcionamiento simult√°neo. 
</p>
</div>
</div>

<div id="outline-container-org2cf016e" class="outline-4">
<h4 id="org2cf016e"><span class="section-number-4">1.1.2.</span> Interpretaci√≥n</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
Dado el microcontrolador ATmega328P, se debe conectar 8 diodos LED de 4 diferentes colores (rojo, verde, amarillo y azul) al su puerto B.
Para esto se calcular√°n las resistencias necesarias, teniendo como dato la corriente que circula por cada uno de los LEDS (10mA) y la ca√≠da de tensi√≥n de cada que var√≠a dependiendo el color.
Teniendo en cuenta la tensi√≥n de salida del microcontrolador, es crucial asegurar que la corriente a trav√©s de cada terminal no exceda su capacidad m√°xima de corriente de salida, as√≠ como tambi√©n verificar que la suma de las corrientes en todas las salidas del puerto B no supere la capacidad m√°xima total.
Por √∫ltimo, se debe realizar un esquema el√©ctrico en Proteus de la conexi√≥n pedida utilizando los LEDS y las resistencias calculadas.
</p>
</div>
</div>

<div id="outline-container-orge0d309a" class="outline-4">
<h4 id="orge0d309a"><span class="section-number-4">1.1.3.</span> Resoluci√≥n</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
Para el c√°lculo de cada una de las resistencias se utilizaron los siguientes datos:
</p>

<ul class="org-ul">
<li>Ca√≠da de Tensi√≥n de cada LED
<ul class="org-ul">
<li>Rojo = 1.8V</li>
<li>Verde = 2.2V</li>
<li>Amarillo = 2.0V</li>
<li>Azul = 3.0V</li>
</ul></li>
<li>Intensidad de corriente nominal (corriente que circula por cada LED), 10mA.</li>
<li>Tensi√≥n de salida del Microcontrolador (4.75 V).</li>
</ul>

<p>
La tensi√≥n de salida del Microcontrolador se obtuvo mirando la figura extra√≠da de la hoja de datos correspondiente al MCU ‚ÄúVoltajes de salida en pines de entrada/salida y Corriente (Vcc = 5V)‚Äù.
Se tom√≥ un valor aproximado de 4.75 V ya que la corriente es de 10mA y suponiendo una temperatura ambiente de 25¬∞C.
</p>



<div id="org7a18321" class="figure">
<p><img src="./images/image14.png" alt="image14.png" />    
</p>
<p><span class="figure-number">Figure 1: </span>VOH vs IOH</p>
</div>



<div id="org63f8661" class="figure">
<p><img src="./images/image18.png" alt="image18.png" />
</p>
<p><span class="figure-number">Figure 2: </span>PULL-UP</p>
</div>


<p>
Sabiendo por ley de Ohm que \( R_{\text{LED}} = \frac{V_{\text{OH}} - V_{\text{LED}}}{I_{\text{OH}}} \),calculamos:
</p>

<p>
\[ R_{\text{rojo}} = \frac{4.75\text{V} - 1.8\text{V}}{10\text{mA}} = 295\Omega \]
\[ R_{\text{verde}} = \frac{4.75\text{V} - 2.2\text{V}}{10\text{mA}} = 255\Omega \]
\[ R_{\text{amarillo}} = \frac{4.75\text{V} - 2.0\text{V}}{10\text{mA}} = 275\Omega \]
\[ R_{\text{azul}} = \frac{4.75\text{V} - 3.0\text{V}}{10\text{mA}} = 175\Omega \]
</p>

<p>
Se debe verificar que la corriente por cada terminal del MCU no supere la capacidad de corriente de cada salida.
Para ello, vemos que en la hoja de datos del microcontrolador ATmega328p, m√°s precisamente de la secci√≥n 28.1 ‚ÄúAbsolute Maximum Ratings‚Äù, nos dice que la corriente m√°xima de salida individual es de 40mA, cuyo valor es menor a los 10mA utilizados.
Adem√°s, sabemos que la corriente total que circula por el puerto B en caso de que los 8 LEDS est√©n encendidos al mismo tiempo ser√≠a de 80mA, valor que es menor a los l√≠mites establecidos (100mA y 150mA) especificados en la secci√≥n 28.2 ‚ÄúDC Characteristics‚Äù de la hoja de datos.
</p>


<div id="org4e1d55c" class="figure">
<p><img src="./images/image17.png" alt="image17.png" />
</p>
<p><span class="figure-number">Figure 3: </span>LEDs</p>
</div>

<p>
Los valores de las resistencias nominales ser√≠an para:
</p>

<ul class="org-ul">
<li>Led rojo : 330</li>
<li>Led verde: 270</li>
<li>Led amarillo: 330</li>
<li>Led azul: 180</li>
</ul>

<p>
De esta forma nos aseguramos que los valores de corriente est√©n por debajo de los 10mA, siendo resistencias lo suficientemente cercanas a las ideales calculadas previamente.
</p>


<div id="orga72f34b" class="figure">
<p><img src="./images/image20.png" alt="image20.png" /> 
</p>
<p><span class="figure-number">Figure 4: </span>Resistores</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org70283ce" class="outline-3">
<h3 id="org70283ce"><span class="section-number-3">1.2.</span> Conexi√≥n del Pulsador</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-org04045e1" class="outline-4">
<h4 id="org04045e1"><span class="section-number-4">1.2.1.</span> Enunciado</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
Se desea conectar un pulsador a una entrada digital del MCU y detectar cuando el usuario presiona y suelta el pulsador.
Muestre el esquema de conexi√≥n y determine la configuraci√≥n del MCU que corresponda. Investigue sobre el efecto de rebote que producen los pulsadores e implemente un m√©todo para eliminar este efecto en su algoritmo de detecci√≥n (puede encontrar informaci√≥n √∫til en la bibliograf√≠a).
</p>
</div>
</div>

<div id="outline-container-org89702fe" class="outline-4">
<h4 id="org89702fe"><span class="section-number-4">1.2.2.</span> Interpretaci√≥n</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
En este ejercicio se debe mostrar el esquema de conexi√≥n usado para conectar un pulsador al microcontrolador.
Se debe desarrollar un c√≥digo de programa que detecte cuando se oprime y se suelta el pulsador, como as√≠ tambi√©n un m√©todo para eliminar el efecto rebote, que se produce al hacer falsos contactos en el interruptor.
</p>
</div>
</div>

<div id="outline-container-org6843358" class="outline-4">
<h4 id="org6843358"><span class="section-number-4">1.2.3.</span> Resoluci√≥n</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Existen dos maneras de conectar un pulsador a una entrada del MCU:
</p>

<ul class="org-ul">
<li>La primera es conectar el pulsador a Vcc y una resistencia pull-down en la otra parte, es decir como se ve en la figura.
Lo que hace esto es dar un valor bajo en caso que el pulsador est√© sin presionar y un valor alto en caso contrario.</li>
<li>La segunda forma de conectar al pulsador es inversa a la mencionada anteriormente, el pulsador es conectadoa GND y se utiliza una resistencia pull-up, como se ve en la figura.
En este caso, cuando el pulsador no est√© presionado se tiene un valor alto, y un valor bajo cuando lo est√©.</li>
</ul>



<div id="orge3dcec9" class="figure">
<p><img src="./images/image15.png" alt="image15.png" />
</p>
<p><span class="figure-number">Figure 5: </span>Pull-up Interno</p>
</div>

<p>
En la pr√°ctica usaremos la configuraci√≥n con la resistencia pull-up, ya que el microcontrolador ATmega328P cuenta con este tipo de resistencias integradas.
Por lo que se debe conectar el pulsador a GND y activar el pull-up interno, y as√≠ evitamos tener que a√±adir una resistencia adicional.
Para conectar el pulsador al microcontrolador usamos el pin 0 del puerto C como entrada.
Cuando se conecta un pulsador puede producirse lo que se conoce como efecto rebote.
Lo que hace este efecto es que cuando se presiona o suelta el pulsador se produce una variaci√≥n en la se√±al en la que alterna entre el valor alto y bajo.
Esta variaci√≥n puede afectar en la ejecuci√≥n correcta del programa ya que devuelve valores err√≥neos a los esperados.
</p>


<div id="orgb73a83b" class="figure">
<p><img src="./images/image22.png" alt="image22.png" />    
</p>
<p><span class="figure-number">Figure 6: </span>Rebote</p>
</div>

<p>
Para resolver este problema, se pueden usar tanto t√©cnicas de hardware como de software.
Aqu√≠ utilizaremos una t√©cnica por software que consiste en buscar N lecturas secuenciales estables del interruptor, donde N es un n√∫mero que va desde 1 (sin ning√∫n rebote) hasta aparentemente infinito.
Generalmente, el c√≥digo detecta una transici√≥n y luego comienza a incrementar o disminuir un contador, releyendo cada vez la entrada, hasta que N alcanza un conteo presumiblemente seguro y sin rebotes.
Si el estado no es estable, el contador se reinicia a su valor inicial.
</p>



<div id="orgc195563" class="figure">
<p><img src="./images/image12.png" alt="image12.png" />
</p>
<p><span class="figure-number">Figure 7: </span>Polling</p>
</div>

<p>
Esto √∫ltimo en pseudoc√≥digo quedar√≠a:
</p>

<pre class="example">
CONSTANTES:
- Intervalo de lectura del hardware en milisegundos
- Tiempo m√≠nimo estable para considerar una tecla como presionada
- Tiempo m√≠nimo estable para considerar una tecla como liberada

FUNCI√ìN para manejar el antirrebote de la tecla:
    Crear un contador para el tiempo de estabilizaci√≥n
    Inicializar valores de salida de la funci√≥n
    Si el estado del pin coincide con el estado antirrebote actual
        Actualizar el temporizador seg√∫n el estado actual
    Sino
        Si Temporizador expirado
            Aceptar cambio de estado
            Restablecer el temporizador seg√∫n el nuevo estado
FIN FUNCI√ìN
</pre>
</div>
</div>
</div>

<div id="outline-container-org23e3ff8" class="outline-3">
<h3 id="org23e3ff8"><span class="section-number-3">1.3.</span> Secuencia de Encendido</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-org4d401ee" class="outline-4">
<h4 id="org4d401ee"><span class="section-number-4">1.3.1.</span> Enunciado</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
Realice el programa para que el MCU encienda los LEDs del puerto B con la siguiente secuencia de encendido repetitiva: b0 y b7 ‚Äì b1 y b6 ‚Äì b2 y b5 ‚Äì b3 y b4.
Luego, cuando el usuario presione y suelte el pulsador debe cambiar a la secuencia: b7-b6-b5-b4-b3-b2-b1-b0.
Si presiona y suelta nuevamente vuelve a la secuencia original y as√≠ sucesivamente.
Elija un retardo adecuado para la visualizaci√≥n en el simulador. Justifique.
</p>
</div>
</div>

<div id="outline-container-org78bb0d5" class="outline-4">
<h4 id="org78bb0d5"><span class="section-number-4">1.3.2.</span> Interpretaci√≥n</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
Se debe realizar un programa que encienda LEDS conectados al puerto B variando entre dos secuencias seg√∫n corresponda.
Estas secuencias deben ir cambiando entre s√≠ a medida que el usuario aprieta y suelta un pulsador.
Se debe elegir un retardo que permita al usuario poder visualizar el encendido de los LEDS.
</p>
</div>
</div>

<div id="outline-container-orgb3ba5ed" class="outline-4">
<h4 id="orgb3ba5ed"><span class="section-number-4">1.3.3.</span> Resoluci√≥n</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
Para la resoluci√≥n de este problema primero debemos configurar el puerto B como salida, poniendo todos los bits del registro de este puerto en ‚Äú1‚Äù.
Adem√°s usaremos la configuraci√≥n del problema 2, donde se utiliza el pin 0 del puerto C como entrada para conectar el pulsador.
Luego hay dos secuencias de encendido de LEDS que van alternando en caso de que se presione y se deje de presionar el pulsador:
</p>

<ul class="org-ul">
<li>De afuera hacia adentro (b0 y b7 ‚Äì b1 y b6 ‚Äì b2 y b5 ‚Äì b3 y b4):</li>
</ul>


<div id="orge0b6196" class="figure">
<p><img src="./images/image16.png" alt="image16.png" />
</p>
<p><span class="figure-number">Figure 8: </span>De afuera hacia adentro</p>
</div>

<p>
En este caso se observa que los LEDS 0 a 3 (b0, b1, b2, b3) deben encenderse rotando hacia la izquierda, y los LEDS restantes (b4, b5, b6, b7) se prenden rotando hacia la derecha, hasta llegar al fin de la secuencia en donde vuelven a empezar.
</p>

<ul class="org-ul">
<li>Orden descendente (b7-b6-b5-b4-b3-b2-b1-b0):</li>
</ul>

<div id="org7666a68" class="figure">
<p><img src="./images/image19.png" alt="image19.png" />
</p>
<p><span class="figure-number">Figure 9: </span>Orden descendente</p>
</div>

<p>
Esta secuencia es en direcci√≥n descendente, es decir los LEDS se encienden de b7 a b0.            
</p>

<p>
Sabiendo esto una posible soluci√≥n a este ejercicio es rotar bits una posici√≥n hacia la izquierda o derecha seg√∫n corresponda, hasta llegar al fin de la secuencia o hasta que el pulsador se presione y se suelte y debamos cambiar de direcci√≥n.
Adem√°s vamos a recurrir al uso de retardos, usando la funci√≥n _delay<sub>ms</sub>(), para que sea posible la visualizaci√≥n de encendido de los LEDS para el usuario.
En caso de que esto no se haga el usuario no podr√° ver como los LEDS se prenden y se apagan.
</p>

<pre class="example">
Definici√≥n de Registros del microcontrolador con la librer√≠a AVR
Especificar la frecuencia de reloj del MCU en 16MHz
Retardos por software ‚Äì Macros: depende de F_CPU con la libreria delay
Creaci√≥n del tipo booleano

Constantes de tiempo
Definir intervalo de lectura del hardware en milisegundos
Definir tiempo m√≠nimo estable para considerar una tecla como presionada
Definir tiempo m√≠nimo estable para considerar una tecla como liberada
FUNCI√ìN para manejar el antirrebote de la tecla
    Crear un contador para el tiempo de estabilizaci√≥n
    Inicializar valores de salida de la funci√≥n
    Si el estado del pin coincide con el estado antirrebote actual
        Actualizar el temporizador seg√∫n el estado actual
    Sino
        Si Temporizador expirado
            Aceptar cambio de estado
            Restablecer el temporizador seg√∫n el nuevo estado
FIN FUNCI√ìN

INICIA MAIN
Definir Puerto B como salida, pin 0 del Puerto C como entrada y activar pull-up interno    
Mientras sea verdadero
Llamar a la rutina de antirrebote
Si el bot√≥n se presion√≥
    Cambio la secuencia
    Reset los LEDs a apagados
    Si es la primera secuencia
        Dejo los LEDs en el inicio de la primera secuencia
    Sino
        Dejo los LEDs en el inicio de la segunda secuencia
Si es primera secuencia
    Si estoy al final de la primera secuencia
        Vuelvo a arrancar la primera secuencia
    Sino
        Tomo los valores de los primeros 4 elementos
        Roto hacia la izquierda
        Tomo los valores de los √∫ltimos 4 elementos
        Roto hacia la derecha
        Asignar en PORTB
    Aplicar un retardo en la visualizaci√≥n
Sino
    Si estoy al final de la segunda secuencia
        Vuelvo a arrancar la segunda secuencia
    Sino
        Establecer el primer valor de la secuencia de forma auxiliar
        Roto hacia la izquierda un solo bit
        Asignar en PORTB
    Aplicar un retardo de visualizaci√≥n
FIN MAIN
</pre>
</div>
</div>
</div>

<div id="outline-container-org9d01b30" class="outline-3">
<h3 id="org9d01b30"><span class="section-number-3">1.4.</span> Conclusiones</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org79f1dd3" class="outline-4">
<h4 id="org79f1dd3"><span class="section-number-4">1.4.1.</span> Enunciado</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Saque conclusiones sobre el funcionamiento del programa, sobre las ventajas y desventajas de utilizar retardos (delays) para temporizar acciones y c√≥mo estos afectan el tiempo de respuesta a la acci√≥n del usuario.
H√°gase preguntas como por ejemplo: ¬øqu√© sucede si se deja presionado constantemente el pulsador? ¬øQu√© sucede si el retardo es de 1 segundo?
</p>
</div>
</div>

<div id="outline-container-org4f5596c" class="outline-4">
<h4 id="org4f5596c"><span class="section-number-4">1.4.2.</span> Resoluci√≥n</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
Podemos concluir que el programa cumple con lo pedido, realiza las secuencias solicitadas de manera correcta.
Se puede mencionar como posible problema el retardo utilizado para la visualizaci√≥n, ya que tiene dos desventajas.
</p>

<p>
Por una parte si el bot√≥n es presionado r√°pidamente y se encuentra en ejecuci√≥n el delay antes mencionado, dicha pulsaci√≥n no tendr√≠a efecto.
El delay es una funci√≥n bloqueante para el microcontrolador, ya que b√°sicamente mantiene a la CPU ejecutando una serie de instrucciones NOP (que por definici√≥n no hacen nada) y no permiten al c√≥digo principal seguir su flujo normal.
Debido a esta primera desventaja, el usuario se ve obligado a mantener presionado el bot√≥n cierto tiempo.
Gracias a que el c√≥digo desarrollado posee un bot√≥n no bloqueante, el usuario no ver√° como las secuencias se detienen, pero tampoco ver√° un cambio instant√°neo.
</p>

<p>
La segunda desventaja es entonces el tiempo de respuesta que tiene el programa, y que perjudica a la experiencia de usuario.
La mayor ventaja de utilizar un retardo bloqueante es que simplemente se necesita hacer uso de la funci√≥n delay para implementarla, lo que nos ahorrar√≠a poner en pr√°ctica otras soluciones.
</p>
</div>
</div>
</div>

<div id="outline-container-org149f950" class="outline-3">
<h3 id="org149f950"><span class="section-number-3">1.5.</span> Bibliograf√≠a</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>The Ganssle Group</li>
<li><a href="https://www.ganssle.com/debouncing.htm">https://www.ganssle.com/debouncing.htm</a></li>
<li><a href="https://www.ganssle.com/debouncing-pt2.htm">https://www.ganssle.com/debouncing-pt2.htm</a></li>
<li>megaAVR¬Æ Data Sheet, ATmega48A/PA/88A/PA/168A/PA/328/P</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: IacobucciB</p>
<p class="date">Created: 2024-06-29 s·b. 14:52</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
